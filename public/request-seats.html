<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./css/header.css">
    <link rel="stylesheet" href="./css/googleMap.css">
    <link rel="stylesheet" href="./css/map-search.css">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <title>Co-Car</title>
</head>
<body>
    <script src="/socket.io/socket.io.js"></script>
    <script src="./js/request-seats.js" defer></script>
    <script src="./js/header.js"></script>
    <header>
        <div class="navbar">
            <a href="/" class="logo">
                <img src="./uploads/images/caravan.png" id="logo-car">
                <img src="./uploads/images/logo.png" id="logo"></a>
            <nav class="tags">
              <a href="./request-seats-origin.html" class="tag tag-request">
                <img src="./uploads/images/search.png" class="icon">尋找路線
            </a>
            <a href="./offer-seats-origin.html" class="tag tag-offer">
                <img src="./uploads/images/add.png" class="icon">提供路線
            </a>
            
            <div class="dropdown">
                <a id="notify-bell" id="dropdownMenuButton" data-toggle="dropdown">
                    <img src="./uploads/images/notification.png" id="bell">
                    <div class="spot"></div>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                    <a class=".dropdown-item"><div class="dropdown-content">無新訊息～</div></a>
                </div>
            </div>
        
            <div class="dropdown">
                <a id="profile" id="dropdownMenuButton" data-toggle="dropdown">
                    <img src="./uploads/images/member.png" id="member">
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                    <a href="./login.html" class="dropdown-item" id="login">登入</a>
                    <a href="./profile.html" class="dropdown-item" id="profile-info">會員資料</a>
                    <a href="./passenger-itinerary.html" class="dropdown-item" id="passenger-route">乘客路線</a>
                    <a href="./driver-itinerary.html" class="dropdown-item" id="driver-route">車主路線</a>
                    <a class="dropdown-item" id="logout">登出</a>
                </div>
            </div>
            <div id="username"></div>
        </nav>
        </div> 
      </header>
    <main>
        <div class="wrapper">
            <div class="route-info">
                <h2>尋找路線</h2>
                <div class="form">
                    <h3 class="label">人數</h3>
                    <select name="persons" id="persons" value="2">
                        <option selected>1</option>
                        <option >2</option>
                        <option >3</option>
                        <option >4</option>
                        <option >5</option>
                        <option >6</option>
                        <option >7</option>
                        <option >8</option>
                    </select> 
                </div>
                <br>
                <br>
                <div class="form">
                    <h3 class="label">日期</h3>
                    <input type="date" name='date' id='date' onclick="formatDate()" value="2021-06-30">
                </div>
                <br>
                <br>
                <button id="next" onclick="click()">發送需求</button>            
            </div>
            <div id="map-wrapper">
                <div id="map"></div>
            </div>
        </div>

    </main>
    <footer>
        <ul id="footer-ul">
            <li><a href="#" class="footer_link">關於 Cocar</a></li>
            <li><a href="#" class="footer_link">服務條款</a></li>
            <li><a href="#" class="footer_link">隱私政策</a></li>
            <li><a href="#" class="footer_link">聯絡我們</a></li>
            <li><a href="#" class="footer_link">FAQ</a></li>
        </ul>
        <div class="link">
            <img src="./uploads/images/line.png">
            <img src="./uploads/images/twitter.png">
            <img src="./uploads/images/facebook.png">
        </div>
        <div class="rights">© 2021. All rights reserved.</div>      
    </footer>
    <script>
        function formatDate() {
            let today =  new Date(Date.now())
                month = (today.getMonth() + 1).toString()
                day = (today.getDate()).toString()
                year = (today.getFullYear()).toString();

            if (month.length < 2) {
                month = '0' + month;
            }          
            if (day.length < 2){
                day = '0' + day;
            } 

            today = [year, month, day].join('-');
            document.getElementById("date").setAttribute("min", today)
        }
        function initMap () {
  const taiwan = new google.maps.LatLng(23.69781, 120.960515);

  map = new google.maps.Map(document.getElementById("map"), {
    center: taiwan,
    zoom: 7
  });

  const originQuery = {
    query: origin,
    fields: ["name", "geometry", "place_id"]
  };
  const destinationQuery = {
    query: destination,
    fields: ["name", "geometry", "place_id"]
  };
  findPlace(originQuery);
  findPlace(destinationQuery);
};
     
    </script>
       
    <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDSS1j7r93IKssIMKJvkh6U5iRFlW8Jeto&libraries=places&callback=initMap"></script>
</body>
</html>